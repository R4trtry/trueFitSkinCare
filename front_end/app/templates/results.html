<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Results</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/dist/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/starter-template.css" rel="stylesheet">
    <link href="../static/scroll_h.css" rel="stylesheet">
    <script src="../static/js/dw_scroll_c.js" type="text/javascript"></script>
  </head>

  <body>
    <div style="display: none; position: absolute; z-index: 110; left: 400; top: 100; width: 15; height: 15" id="preview_div"></div>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">TrueFitSKinCare</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="../../">Home</a></li>
            <li><a href="#about">lides</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

        <table style="width:100%,boarder">
          <!-- <tr> -->
          <td><h1 class="float">We recommend <p id="category"}>{{category}}</p></h1> 
            <p>from 1177 products</p>
            <p>based on 183,944 reviews</p>
            <p>made by 115,594 reviewers</p></td>
          <td>
            <form id="category_form" action="">
            <select id="category_select">
            <option value="moisturizer-skincare">Moisturizer</option>
            <option value="bb-cream-cc-cream">BB & CC cream</option>
            <option value="eye-cream-dark-circles">Eye cream</option>
            <option value="face-mask">Face mask</option>
            <option value="face-serum">Face serum</option>
            <option value="face-wash-facial-cleanser">Face wash</option>
            <option value="facial-toner-skin-toner">Toner</option>
            <option value="night-cream">Night Cream</option>
            </select>
            </form>
          </td>
          <td>
            <div>
              <input id="button" type="button" value="Need something else?" 
                     onclick="return btntest_onclick()" />
              <script language="javascript" type="text/javascript">
                function btntest_onclick() {
                  category = document.getElementById('category_select').value;
                  window.location.href = "/results/"+category;
                }
              </script>
            </div>
          </td>
          <!-- </tr> -->
        </table>

        <!-- the result table -->
        <table id="resulttable" style="padding:2px, width:70%,margin:auto">
          <tr><td></td><td>Brand</td><td>Product</td><td>Price</td></tr>
        </table>
        <br><br><br>     
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../static/js/jquery.js"></script>
    <script src="../static/dist/js/bootstrap.min.js"></script>
    <script>
      function add_image_to_box(index, src) {
        var str = '<img id="screen'+ index.toString() + '" src="'+src+'" class="screen2">'
        console.log(str)
        $('.screenshots').append(str);
      };      
      filepath = '/Users/xuanzhang/Developer/python/scrapping/sephora/static/'      
      
      var category= document.getElementById("category").textContent;//'eye-cream-dark-circles';//
      document.getElementById('category_select').value = category;
      console.log(category)

      window.onload=function() {
        
        var products = [];
        
        jQuery.ajax(
          '../result_json/'+category,
          {success:
            function(data) {
              console.log(data);
              data = data.products;
              for (i=0; i < data.length; i++) {
                htmlstr = '<tr>';
                htmlstr += '<td>' + data[i]['image'] + '</td>';
                htmlstr += '<td>' + data[i]['brand'] + '</td>';
                htmlstr += '<td>' + data[i]['product_name'] + '</td>';
                htmlstr += '<td> $' + data[i]['price'] + '</td>';
                htmlstr += '</tr>';
                console.log(htmlstr)
                $('#resulttable').append(htmlstr);
              }
            }
          }
        )
      }
    </script>
  </body>
</html>
